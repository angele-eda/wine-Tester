<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>멋재이 아침 루틴 리마인더</title>
</head>
<body>
  <h1>멋재이 아침 루틴 ⏰</h1>
  <p>06:20에 기상해서 이 페이지를 열고 아래 버튼을 눌러줘.</p>

  <button id="playBtn">아침 루틴 재생 ▶</button>

  <ol id="stepList">
    <li>기상 + 소금물 150~200ml 마시기</li>
    <li>전력 런닝 5분</li>
    <li>런닝 후 10분 휴식</li>
    <li>DGL 1정 녹여 먹기</li>
    <li>유당분해제 1정</li>
    <li>칼로리 몬스터 1/2만 마시기</li>
    <li>칼로리 몬스터 나머지 1/2 + 류신 1정</li>
  </ol>

  <script>
    // 각 단계 안내 문구
    const steps = [
      "지금은 기상 후, 소금물 150에서 200밀리리터를 마실 시간입니다.",
      "이제 전력 런닝을 5분간 해 주세요.",
      "런닝이 끝났습니다. 10분 동안 가볍게 쉬어 주세요.",
      "이제 디지엘, 디지엘 1정을 입에서 천천히 녹여 드세요.",
      "이제 유당 분해제를 1정 드세요. 곧 칼로리 몬스터를 마실 준비입니다.",
      "이제 칼로리 몬스터를 절반만 마셔 주세요.",
      "이제 칼로리 몬스터 나머지 절반을 마시고, 류신 1정을 함께 드세요."
    ];

    // 버튼을 누른 시점을 기준으로 '몇 분 뒤'에 안내할지 (분 단위)
    // 0분, 5분, 10분, 20분, 25분, 30분, 35분
    const delaysMinutes = [0, 5, 10, 20, 25, 30, 35];

    function speak(text) {
      if ("speechSynthesis" in window) {
        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = "ko-KR";
        window.speechSynthesis.speak(utter);
      } else {
        alert(text);
      }
    }

    document.getElementById("playBtn").addEventListener("click", () => {
      // 중복 실행 방지
      const btn = document.getElementById("playBtn");
      btn.disabled = true;
      btn.textContent = "루틴 진행 중… ⏳";

      const start = Date.now();

      delaysMinutes.forEach((min, index) => {
        const delayMs = min * 60 * 1000;
        setTimeout(() => {
          const msg = steps[index];
          console.log(`알림(${min}분 후): ${msg}`);
          speak(msg);
        }, delayMs);
      });

      // 대략 마지막 단계 후 버튼 다시 활성화 (여유 있게 40분 후)
      setTimeout(() => {
        btn.disabled = false;
        btn.textContent = "아침 루틴 다시 재생 ▶";
      }, 40 * 60 * 1000);
    });
  </script>
</body>
</html>